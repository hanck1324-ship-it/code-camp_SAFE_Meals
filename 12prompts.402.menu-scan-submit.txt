아래의 조건을 모두 적용하여, 아래의 요구사항을 모두 구현할 것.
구현 결과를 체크리스트로 반환할 것.

==============================================

조건-커서룰) 아래의 커서룰을 적용하여 작업하고, 이 작업이 끝나면 해당 rules 적용 결과를 체크리스트로 반환할 것.
            - @01-common.mdc
            - @04-func.mdc

==============================================

조건-파일경로) 참고할 PAGE 경로: src/app/scan/page.tsx
조건-파일경로) 구현될 HOOK 경로: src/features/scan/hooks/index.submit.hook.ts
조건-파일경로) 구현될 TEST 파일경로: src/features/scan/tests/analyze-submit.spec.ts

==============================================

조건-스타일) Tailwind CSS를 사용하여 스타일링할 것.
            - 로딩 상태, 에러 메시지 등 UI 요소에 Tailwind 클래스 활용
            - globals.css의 CSS 변수를 활용 (예: bg-[var(--color-error)])
            - 하드코딩된 색상값 사용 금지

==============================================

핵심요구사항) 다음의 기능을 playwright 테스트를 활용하여 TDD 기반으로 구현하고, 테스트에 통과할 때까지 반복할 것.

1) 테스트 제외 라이브러리
   - jest
   - @testing-library/react

2) 테스트 조건
   - timeout은 설정하지 않거나, 500ms 미만으로 설정할 것.
   - 페이지가 완전히 로드된 후 테스트할 것.
       - 페이지 로드 식별 요구사항: 고정식별자 data-testid 대기 방법
       - **중요금지사항** 페이지 로드 식별 금지사항: networkidle 대기 방법

핵심요구사항) 다음의 기능을 Edge Function과 연동하여 step-by-step 으로 구현하고, 적용 결과를 체크리스트로 반환할 것.

1. 이미지 분석 제출 시나리오
   1-1) 촬영된 이미지를 Edge Function으로 전송할 것
        - 엔드포인트: /scan/analyze
        - 요청 방식: POST
        - 요청 데이터
            - image: File 또는 base64 string (필수)
            - language: 'ko' | 'en' (필수)
            - device_info: { platform: string, userAgent: string } (선택)
        - 요청 헤더
            - Content-Type: multipart/form-data 또는 application/json
            - Authorization: Bearer token (현재 로그인 사용자)

   1-2) Edge Function 응답 구조를 처리할 것
        - 응답 타입 정의
            ```typescript
            interface AnalyzeResponse {
              ok: boolean;
              quality: {
                passed: boolean;
                reason?: string;
                score?: {
                  blur: number;
                  brightness: number;
                  resolution: number;
                };
              };
              analysis?: {
                overall_status: 'SAFE' | 'CAUTION' | 'DANGER';
                detected_ingredients: string[];
                warnings: Array<{
                  ingredient: string;
                  allergen: string;
                  severity: 'HIGH' | 'MEDIUM' | 'LOW';
                }>;
                message_ko: string;
                message_en: string;
              };
            }
            ```

   1-3) 품질 검사 실패 시 로직을 완성할 것
        - 조건: quality.passed === false
        - 에러 메시지 표시
            - 한국어: quality.reason 또는 "사진이 흐릿하거나 품질이 좋지 않습니다. 다시 촬영해주세요."
            - 영어: quality.reason 또는 "Photo quality is poor. Please retake the photo."
        - 상태 변경: 카메라 화면으로 돌아가기
        - 재촬영 유도: 품질 검사 실패 이유를 사용자에게 명확히 안내
            - 예: "사진이 흔들렸어요", "너무 어두워요", "글자가 너무 작아요"

   1-4) 품질 검사 성공 시 로직을 완성할 것
        - 조건: quality.passed === true && analysis 존재
        - 상태 저장: analysis 데이터를 useState로 저장
        - 페이지 이동: /scan/result 페이지로 이동
        - 데이터 전달: analysis 데이터를 result 페이지로 전달 (Context 또는 Router state 활용)
        - 알림메시지: 없음 (결과 페이지에서 표시)

2. 로딩 상태 관리
   2-1) 제출 중 로딩 상태를 관리할 것
        - isLoading: boolean 상태
        - 로딩 중: "분석하기" 버튼 비활성화
        - 로딩 중 표시: "분석 중..." 텍스트 또는 스피너 표시

   2-2) 에러 처리
        - 네트워크 에러: "네트워크 연결을 확인해주세요."
        - 서버 에러: "일시적인 오류가 발생했습니다. 다시 시도해주세요."
        - 타임아웃: 30초 이상 응답 없을 시 에러 처리

핵심요구사항) 테스트 파일에 다음 시나리오를 구현할 것.
            - 테스트 파일 경로: src/features/scan/tests/analyze-submit.spec.ts
            - 테스트 시나리오
                1) 이미지 촬영 후 "분석하기" 버튼 클릭 시 Edge Function 호출
                2) 품질 검사 통과 시 결과 페이지로 이동
                3) 품질 검사 실패 시 에러 메시지 표시 및 카메라 화면 유지
                4) 네트워크 에러 시 적절한 에러 메시지 표시
                5) 로딩 상태 동안 버튼 비활성화

핵심요구사항) useState를 사용하여 상태 관리할 것.
            - imageData: 촬영된 이미지 데이터
            - isLoading: 제출 중 로딩 상태
            - error: 에러 메시지
            - analysisResult: 분석 결과 (성공 시)
