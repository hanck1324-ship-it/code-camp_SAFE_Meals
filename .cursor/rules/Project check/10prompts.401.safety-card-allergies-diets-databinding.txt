아래의 조건을 모두 적용하여, 아래의 요구사항을 모두 구현할 것.
구현 결과를 체크리스트로 반환할 것.

==============================================

조건-커서룰) 아래의 커서룰을 적용하여 작업하고, 이 작업이 끝나면 해당 rules 적용 결과를 체크리스트로 반환할 것.
                - @01-common.mdc
                - @04-func.mdc

조건-파일경로) 참고할 PAGE 파일경로: src/app/profile/safety-card/page.tsx

조건-파일경로) 구현될 COMPONENT 파일경로: src/features/profile/components/safety-card/allergies-diets-databinding/index.tsx

조건-파일경로) 구현될 HOOK 파일경로: src/features/profile/components/safety-card/hooks/index.allergies-diets-load.hook.ts

조건-파일경로) 구현될 TEST 파일경로: tests/safety-card-allergies-diets-databinding.spec.ts

조건-스키마) Supabase 스키마 문서 경로: docs/schema.md
                - user_allergies 테이블: id, user_id, allergy_code, severity, notes, created_at
                - user_diets 테이블: id, user_id, diet_code, notes, created_at
                - allergy_types 테이블: code, name_ko, name_en, name_ja, name_zh, icon, category
                - diet_types 테이블: code, name_ko, name_en, name_ja, name_zh, icon, description_ko, description_en

==============================================

핵심요구사항) 다음의 기능을 playwright 테스트를 활용하여 TDD 기반으로 구현하고, 테스트에 통과할 때까지 반복할 것.

1) 테스트 제외 라이브러리
   - jest
   - @testing-library/react

2) 테스트 조건
   - timeout은 설정하지 않거나, 500ms 미만으로 설정할 것.
   - 페이지가 완전히 로드된 후 테스트할 것.
       - 페이지 로드 식별 요구사항: 고정식별자 data-testid 대기 방법
       - **중요금지사항** 페이지 로드 식별 금지사항: networkidle 대기 방법

3) 테스트 API 조건
   3-1) 데이터
       - 실제 Supabase 데이터를 사용할 것.
       - Mock 데이터를 사용하지 말 것.

   3-2) 성공 시나리오
       - Supabase에서 알레르기/식단 데이터 로드
       - 카드 리스트 형태로 표시
       - 알레르기 아이콘, 이름, 심각도, 노트 표시
       - 식단 아이콘, 이름, 노트 표시

   3-3) 실패 시나리오
       - API 호출 실패 시 에러 메시지 표시
       - 데이터가 없을 때 빈 상태 메시지 표시

4) 데이터 조건
   - 저장소: Supabase
   - 테이블: user_allergies, user_diets
   - 연결 방식: @/lib/supabase의 getSupabaseClient() 사용
   - 쿼리 구조:
       ```typescript
       // 알레르기 데이터
       const { data: allergies } = await supabase
         .from('user_allergies')
         .select('allergy_code, severity, notes')
         .eq('user_id', user.id);

       // 식단 데이터
       const { data: diets } = await supabase
         .from('user_diets')
         .select('diet_code, notes')
         .eq('user_id', user.id);
       ```

핵심요구사항) Supabase에서 알레르기/식단 데이터를 불러와 카드 리스트 형태로 표시하는 컴포넌트를 구현할 것.

1) 바인딩할 데이터
   - 훅: useSafetyCardAllergiesDietsLoad (새로 생성 또는 기존 훅 활용)
   - 반환값:
       - allergies: Array<{ allergy_code: string; severity: string; notes?: string }>
       - diets: Array<{ diet_code: string; notes?: string }>
       - isLoading: boolean
       - error: string | null

2) 데이터 바인딩 상세내용
   2-1) 알레르기 카드
       - allergy_code → allergy_types 테이블과 매칭하여 아이콘, 이름 표시
       - severity → "경미", "보통", "심각", "생명위협" 중 하나로 한글 표시
       - notes → 메모 표시 (있는 경우만)
       - 카드 스타일: 빨간색 계열 (border-red-400, bg-red-50)

   2-2) 식단 카드
       - diet_code → diet_types 테이블과 매칭하여 아이콘, 이름 표시
       - notes → 메모 표시 (있는 경우만)
       - 카드 스타일: 초록색 계열 (border-green-400, bg-green-50)

   2-3) 로딩 상태
       - isLoading === true: 로딩 스피너 표시 (Loader2 컴포넌트 사용)
       - data-testid="allergies-diets-loading"

   2-4) 에러 상태
       - error !== null: 에러 메시지 표시
       - data-testid="allergies-diets-error"
       - 메시지: "알레르기 및 식단 정보를 불러올 수 없습니다."

   2-5) 빈 상태
       - allergies.length === 0 && diets.length === 0: 빈 상태 메시지 표시
       - data-testid="allergies-diets-empty"
       - 메시지: "등록된 알레르기 및 식단 정보가 없습니다."

3) CSS 처리
   - 카드 레이아웃: rounded-2xl, p-4, border-2, shadow-sm
   - 알레르기 섹션 타이틀: "알레르기 정보" (빨간색 아이콘 포함)
   - 식단 섹션 타이틀: "식단 정보" (초록색 아이콘 포함)
   - 각 카드 내부:
       - 아이콘: text-2xl
       - 이름: font-semibold, text-base
       - 심각도(알레르기): text-sm, text-red-600, 뱃지 형태
       - 노트: text-sm, text-gray-600, italic

4) 컴포넌트 구조
   ```tsx
   <div data-testid="allergies-diets-databinding-container">
     {/* 로딩 상태 */}
     {isLoading && <LoadingState />}

     {/* 에러 상태 */}
     {error && <ErrorState message={error} />}

     {/* 빈 상태 */}
     {!isLoading && !error && allergies.length === 0 && diets.length === 0 && <EmptyState />}

     {/* 알레르기 섹션 */}
     {allergies.length > 0 && (
       <div data-testid="allergies-section">
         <h3>알레르기 정보</h3>
         {allergies.map((allergy) => (
           <AllergyCard
             key={allergy.allergy_code}
             code={allergy.allergy_code}
             severity={allergy.severity}
             notes={allergy.notes}
             data-testid={`allergy-card-${allergy.allergy_code}`}
           />
         ))}
       </div>
     )}

     {/* 식단 섹션 */}
     {diets.length > 0 && (
       <div data-testid="diets-section">
         <h3>식단 정보</h3>
         {diets.map((diet) => (
           <DietCard
             key={diet.diet_code}
             code={diet.diet_code}
             notes={diet.notes}
             data-testid={`diet-card-${diet.diet_code}`}
           />
         ))}
       </div>
     )}
   </div>
   ```

5) 테스트 시나리오
   5-1) 성공 시나리오
       - 알레르기 데이터만 있을 때 카드 표시
       - 식단 데이터만 있을 때 카드 표시
       - 알레르기 + 식단 데이터가 모두 있을 때 카드 표시
       - 심각도별로 올바른 한글 텍스트 표시
       - 노트가 있을 때만 노트 영역 표시

   5-2) 실패 시나리오
       - 네트워크 에러 시 에러 메시지 표시
       - 빈 배열 응답 시 빈 상태 메시지 표시

   5-3) 로딩 시나리오
       - 데이터 로드 중 로딩 스피너 표시
       - 로딩 완료 후 카드 리스트 표시

핵심요구사항) 안전 카드 페이지(src/app/profile/safety-card/page.tsx)에 생성된 컴포넌트를 연결할 것.
                1) 위치: PIN 인증 성공 후 안전카드 메시지 하단
                2) 조건
                    - isUnlocked === true 일 때만 표시
                    - 기존 안전카드 메시지와 스타일 일관성 유지
                3) import 경로: @/features/profile/components/safety-card/allergies-diets-databinding

핵심요구사항) 알레르기 타입 및 식단 타입 상수를 정의할 것.
                1) 파일 경로: src/features/profile/components/safety-card/allergies-diets-databinding/constants.ts
                2) 내용
                    - ALLERGY_TYPES: 알레르기 코드별 아이콘, 한글명, 영문명 매핑
                    - DIET_TYPES: 식단 코드별 아이콘, 한글명, 영문명 매핑
                    - SEVERITY_LABELS: 심각도별 한글 레이블 매핑
                3) 참고: apps/web/src/app/profile/settings/allergies-diets/page.tsx의 상수 활용
