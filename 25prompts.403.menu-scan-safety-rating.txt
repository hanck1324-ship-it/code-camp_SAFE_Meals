아래의 조건을 모두 적용하여, 아래의 요구사항을 모두 구현할 것.
구현 결과를 체크리스트로 반환할 것.

==============================================

조건-커서룰) 아래의 커서룰을 적용하여 작업하고, 이 작업이 끝나면 해당 rules 적용 결과를 체크리스트로 반환할 것.
            - @01-common.mdc
            - @04-func.mdc

==============================================

조건-파일경로) 구현될 HOOK 파일경로: src/components/menu-scan/hooks/useSafetyRating.hook.ts
조건-파일경로) 구현될 TEST 파일경로: src/components/menu-scan/tests/useSafetyRating.spec.ts

==============================================

핵심요구사항) playwright 테스트를 활용하여 TDD 기반으로 구현하고, 테스트에 통과할 때까지 반복할 것.

1) 테스트 제외 라이브러리
   - jest
   - @testing-library/react

2) 테스트 조건
   - timeout은 설정하지 않거나, 500ms 미만으로 설정할 것.
   - 페이지가 완전히 로드된 후 테스트할 것.
       - 페이지 로드 식별 요구사항: 고정식별자 data-testid 대기 방법
       - **중요금지사항** 페이지 로드 식별 금지사항: networkidle 대기 방법

3) 테스트 시나리오
   3-1) 성공 시나리오
        - WARNING 등급: 직접 재료에 알레르기 포함 검증
        - CAUTION 등급: 추론 재료에 알레르기 포함 검증
        - SAFE 등급: 알레르기 성분 없음 검증
        - 교차오염 위험 감지 검증
        - reasons 배열이 우선순위대로 정렬되는지 검증
        - 등급별 적절한 reason 문구 생성 검증

   3-2) 실패 시나리오
        - 빈 입력 데이터 처리 검증
        - 직접 재료와 추론 재료 모두 비어있을 때 처리 검증

==============================================

핵심요구사항) 교차오염 & 최종 등급 산정 커스텀 훅을 구현할 것.

1) 입력 데이터 구조
   {
     directMatches: {
       ingredient: string;
       allergen: string;
       reason: string;
     }[];
     inferredMatches: {
       ingredient: string;
       allergen: string;
       reason: string;
       confidence: 'high' | 'medium' | 'low';
     }[];
     menuCategory: string;
     cookingMethod: string;
   }

2) 출력 데이터 구조
   {
     rating: 'SAFE' | 'CAUTION' | 'WARNING';
     reasons: string[];
     crossContaminationRisk: boolean;
     crossContaminationReasons: string[];
   }

3) 등급 산정 로직 상세내용
   3-1) 직접 재료 알레르기 검증
        - directMatches 배열이 비어있지 않으면 WARNING 등급
        - directMatches의 모든 reason을 reasons 배열에 추가
        - 우선순위: 가장 높음

   3-2) 추론 재료 알레르기 검증
        - directMatches는 비어있지만 inferredMatches가 있으면 CAUTION 등급
        - confidence가 'high'인 추론 재료 우선 표시
        - inferredMatches의 모든 reason을 reasons 배열에 추가
        - 우선순위: 중간

   3-3) 교차오염 위험 판단
        - 조리 도구 공유 위험 감지
            - "튀김류" + "해산물 알레르기" → 같은 튀김기 사용 위험
            - "그릴" + "갑각류 알레르기" → 같은 그릴 사용 위험
        - 조리 공간 공유 위험 감지
            - "찌개류" + "해산물 알레르기" → 같은 주방에서 해산물 조리 위험
        - crossContaminationRisk = true 설정
        - crossContaminationReasons에 근거 추가
        - 교차오염 위험이 있으면 CAUTION 등급 이상으로 상향

   3-4) SAFE 등급
        - directMatches, inferredMatches 모두 비어있음
        - crossContaminationRisk = false
        - reasons에 "알레르기 성분이 감지되지 않았습니다" 추가

4) 교차오염 규칙 테이블 구축
   - 조리 방법별 교차오염 위험
   - 음식 카테고리별 교차오염 위험
   - 예시:
     {
       cookingMethod: "튀기기",
       riskAllergens: ["해산물", "밀가루", "계란"],
       reason: "같은 튀김기를 사용하여 교차오염 가능성이 있습니다"
     }

5) reasons 배열 우선순위
   - 1순위: 직접 재료 알레르기 (WARNING)
   - 2순위: 추론 재료 알레르기 (confidence high)
   - 3순위: 추론 재료 알레르기 (confidence medium/low)
   - 4순위: 교차오염 위험
   - 5순위: SAFE 메시지

6) 훅 인터페이스
   const useSafetyRating = () => {
     const calculateRating = (input: RatingInput) => RatingOutput;
     return { calculateRating };
   }

7) 테스트 케이스 예시
   입력:
   {
     directMatches: [
       {
         ingredient: "새우젓",
         allergen: "갑각류",
         reason: "김치찌개에는 새우젓이 포함되어 있습니다 (갑각류 알레르기)"
       }
     ],
     inferredMatches: [
       {
         ingredient: "멸치육수",
         allergen: "해산물",
         reason: "찌개류는 일반적으로 멸치육수를 사용합니다 (해산물 알레르기 주의)",
         confidence: "high"
       }
     ],
     menuCategory: "찌개류",
     cookingMethod: "끓이기"
   }

   출력:
   {
     rating: "WARNING",
     reasons: [
       "김치찌개에는 새우젓이 포함되어 있습니다 (갑각류 알레르기)",
       "찌개류는 일반적으로 멸치육수를 사용합니다 (해산물 알레르기 주의)"
     ],
     crossContaminationRisk: false,
     crossContaminationReasons: []
   }

핵심요구사항) 등급별 UI 표시 가이드를 주석으로 포함할 것.
                - WARNING: 빨간색, "위험" 아이콘, 굵은 글씨
                - CAUTION: 주황색, "주의" 아이콘, 중간 글씨
                - SAFE: 초록색, "안전" 아이콘, 일반 글씨
