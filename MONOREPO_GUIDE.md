# SafeMeals ëª¨ë…¸ë ˆí¬

React Native ë„¤ì´í‹°ë¸Œ ì‰˜ + Next.js ì›¹ë·° í•˜ì´ë¸Œë¦¬ë“œ ì•±

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
safemeals-monorepo/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                    # Next.js ì›¹ì•± (ì›¹ë·°ìš©)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ mobile/                 # React Native ë„¤ì´í‹°ë¸Œ ì•±
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ navigation/     # ë„¤ì´í‹°ë¸Œ ë„¤ë¹„ê²Œì´ì…˜
â”‚       â”‚   â”œâ”€â”€ screens/
â”‚       â”‚   â”‚   â”œâ”€â”€ native/     # ìˆœìˆ˜ ë„¤ì´í‹°ë¸Œ í™”ë©´
â”‚       â”‚   â”‚   â””â”€â”€ webview/    # ì›¹ë·° ë˜í¼ í™”ë©´
â”‚       â”‚   â”œâ”€â”€ components/     # ë„¤ì´í‹°ë¸Œ ì»´í¬ë„ŒíŠ¸
â”‚       â”‚   â”œâ”€â”€ services/       # ë„¤ì´í‹°ë¸Œ ì„œë¹„ìŠ¤
â”‚       â”‚   â””â”€â”€ bridge/         # ë¸Œë¦¿ì§€ í•¸ë“¤ëŸ¬
â”‚       â”œâ”€â”€ android/
â”‚       â”œâ”€â”€ ios/
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ shared/                 # ê³µìœ  íŒ¨í‚¤ì§€
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ types/          # ê³µí†µ íƒ€ì…
â”‚       â”‚   â”œâ”€â”€ constants/      # ê³µí†µ ìƒìˆ˜
â”‚       â”‚   â”œâ”€â”€ utils/          # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚       â”‚   â””â”€â”€ bridge-protocol/# ì›¹ë·°-ë„¤ì´í‹°ë¸Œ í†µì‹ 
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ pnpm-workspace.yaml
â””â”€â”€ package.json
```

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ì„¤ì¹˜

```bash
npm install -g pnpm
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pnpm install
```

### 3. ì›¹ ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
pnpm dev:web
# ë˜ëŠ”
cd apps/web && pnpm dev
```

### 4. ëª¨ë°”ì¼ ì•± ì‹¤í–‰

```bash
# iOS
cd apps/mobile
npx pod-install
pnpm ios

# Android
cd apps/mobile
pnpm android
```

## ğŸ“± í™”ë©´ë³„ êµ¬í˜„ ë°©ì‹

| í™”ë©´ | ë°©ì‹ | ì´ìœ  |
|------|------|------|
| ìŠ¤í”Œë˜ì‹œ | ë„¤ì´í‹°ë¸Œ | ì•± ì‹œì‘ ì†ë„, ë¸Œëœë”© |
| ì¹´ë©”ë¼/ìŠ¤ìº” | ë„¤ì´í‹°ë¸Œ | ì¹´ë©”ë¼ ì ‘ê·¼, ì„±ëŠ¥ |
| ëŒ€ì‹œë³´ë“œ | ì›¹ë·° | ë³µì¡í•œ UI, ë¹ ë¥¸ ì—…ë°ì´íŠ¸ |
| ì˜¨ë³´ë”© | ì›¹ë·° | ë³µì¡í•œ í¼, A/B í…ŒìŠ¤íŠ¸ |
| í”„ë¡œí•„ | ì›¹ë·° | ìì£¼ ë³€ê²½ë˜ëŠ” ê¸°ëŠ¥ |
| ìŠ¤ìº” ê²°ê³¼ | ì›¹ë·° | ë³µì¡í•œ UI, ë°ì´í„° í‘œì‹œ |
| ì„¤ì • | ë„¤ì´í‹°ë¸Œ | ê¶Œí•œ ê´€ë¦¬, ì‹œìŠ¤í…œ ì—°ë™ |

## ğŸ”— ì›¹ë·°-ë„¤ì´í‹°ë¸Œ ë¸Œë¦¿ì§€ ì‚¬ìš©ë²•

### ì›¹ì—ì„œ ë„¤ì´í‹°ë¸Œ ê¸°ëŠ¥ í˜¸ì¶œ

```typescript
import { nativeBridge, isNativeApp } from '@safemeals/shared/bridge';

// ë„¤ì´í‹°ë¸Œ ì•±ì¸ì§€ í™•ì¸
if (isNativeApp()) {
  // ë°”ì½”ë“œ ìŠ¤ìº” ìš”ì²­
  nativeBridge.scanBarcode();
  
  // ë„¤ì´í‹°ë¸Œ í™”ë©´ìœ¼ë¡œ ì´ë™
  nativeBridge.navigate('Settings');
  
  // ë„¤ì´í‹°ë¸Œ ì•ŒëŸ¿ í‘œì‹œ
  nativeBridge.showAlert('ì•Œë¦¼', 'ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤');
  
  // í–…í‹± í”¼ë“œë°±
  nativeBridge.haptic('medium');
  
  // ê³µìœ 
  nativeBridge.share('ì œëª©', 'ë‚´ìš©', 'https://...');
}
```

### ë„¤ì´í‹°ë¸Œì—ì„œ ì›¹ë·°ë¡œ ë©”ì‹œì§€ ì „ì†¡

```typescript
// apps/mobile/src/components/WebViewContainer.tsx ì°¸ì¡°
sendToWebView({ type: 'SCAN_RESULT', payload: { barcode: '123456' } });
```

## ğŸ“¦ íŒ¨í‚¤ì§€ ì„¤ëª…

### @safemeals/web
- Next.js 14 ê¸°ë°˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
- ì›¹ë·°ë¡œ ë Œë”ë§ë˜ëŠ” í™”ë©´ë“¤
- ë°˜ì‘í˜• UI, PWA ì§€ì›

### @safemeals/mobile
- React Native ê¸°ë°˜ ë„¤ì´í‹°ë¸Œ ì•±
- react-native-webviewë¡œ ì›¹ ì»¨í…ì¸  í‘œì‹œ
- react-native-vision-cameraë¡œ ë°”ì½”ë“œ ìŠ¤ìº”

### @safemeals/shared
- ì›¹/ëª¨ë°”ì¼ ê³µí†µ íƒ€ì… ì •ì˜
- ë¸Œë¦¿ì§€ í”„ë¡œí† ì½œ ì •ì˜
- ê³µí†µ ìƒìˆ˜ ë° ìœ í‹¸ë¦¬í‹°

## ğŸ› ï¸ ê°œë°œ ê°€ì´ë“œ

### ìƒˆë¡œìš´ ë„¤ì´í‹°ë¸Œ í™”ë©´ ì¶”ê°€

1. `apps/mobile/src/screens/native/` ì— í™”ë©´ ì»´í¬ë„ŒíŠ¸ ìƒì„±
2. `RootNavigator.tsx` ì— ë¼ìš°íŠ¸ ì¶”ê°€
3. í•„ìš”ì‹œ ë¸Œë¦¿ì§€ ë©”ì‹œì§€ íƒ€ì… ì¶”ê°€

### ìƒˆë¡œìš´ ì›¹ë·° í™”ë©´ ì¶”ê°€

1. `apps/web/src/app/` ì— í˜ì´ì§€ ìƒì„±
2. `apps/mobile/src/screens/webview/` ì— ë˜í¼ ìƒì„±
3. í•„ìš”ì‹œ `WEBVIEW_ROUTES` ì— ë§¤í•‘ ì¶”ê°€

### ë¸Œë¦¿ì§€ ë©”ì‹œì§€ ì¶”ê°€

1. `packages/shared/src/bridge-protocol/types.ts` ì— íƒ€ì… ì¶”ê°€
2. ì›¹ì—ì„œ ì‚¬ìš©ì‹œ `web-bridge.ts` ì— í¸ì˜ í•¨ìˆ˜ ì¶”ê°€
3. ë„¤ì´í‹°ë¸Œì—ì„œ `WebViewContainer.tsx` ì— í•¸ë“¤ëŸ¬ ì¶”ê°€
